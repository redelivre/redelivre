!function(t){formintorjs.define([],function(){var a=Backbone.View.extend({el:".wpmudev-forminator-forminator-settings",events:{"click .sui-side-tabs label.sui-tab-item input":"sidetabs","click .sui-sidenav .sui-vertical-tab a":"sidenav","change .sui-sidenav select.sui-mobile-nav":"sidenav_select","click .stripe-connect-modal":"open_stripe_connect_modal","click .paypal-connect-modal":"open_paypal_connect_modal","click .forminator-stripe-connect":"connect_stripe","click .disconnect_stripe":"disconnect_stripe","click .forminator-paypal-connect":"connect_paypal","click .disconnect_paypal":"disconnect_paypal","click button.sui-tab-item":"buttonTabs"},initialize:function(){var a=this;if(t(".wpmudev-forminator-forminator-settings").length){this.$el.find(".forminator-settings-save").submit(function(i){i.preventDefault();var n=t(this),e=n.find(".wpmudev-action-done").data("nonce"),o=n.find(".wpmudev-action-done").data("action"),r=n.find(".wpmudev-action-done").data("title"),s=n.find(".wpmudev-action-done").data("isReload");a.submitForm(t(this),o,e,r,s)});var i=window.location.hash;_.isUndefined(i)||_.isEmpty(i)||this.sidenav_go_to(i.substring(1),!0),this.render("v2"),this.render("v2-invisible"),this.render("v3")}},render:function(a){var i=this.$el.find("#"+a+"-recaptcha-preview");i.html('<p class="fui-loading-dialog"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:{action:"forminator_load_recaptcha_preview",captcha:a}}).done(function(t){t.success&&i.html(t.data)})},submitForm:function(a,i,n,e,o){var r={},s=this;r.action="forminator_save_"+i+"_popup",r._ajax_nonce=n;var d=a.serialize()+"&"+t.param(r);t.ajax({url:Forminator.Data.ajaxUrl,type:"POST",data:d,beforeSend:function(){a.find(".sui-button").addClass("sui-button-onload")},success:function(t){var a=_.template("<strong>{{ tab }}</strong> {{ Forminator.l10n.commons.update_successfully }}");Forminator.Notification.open("success",a({tab:e}),4e3),"captcha"===i&&(s.render("v2"),s.render("v2-invisible"),s.render("v3")),o&&window.location.reload()},error:function(t){Forminator.Notification.open("error",Forminator.l10n.commons.update_unsuccessfull,4e3)}}).always(function(){a.find(".sui-button").removeClass("sui-button-onload")})},sidetabs:function(t){var a=this.$(t.target),i=a.parent("label"),n=a.data("tab-menu"),e=a.closest(".sui-side-tabs"),o=e.find(".sui-tabs-menu .sui-tab-item"),r=o.find("input");a.is("input")&&(o.removeClass("active"),r.removeAttr("checked"),e.find(".sui-tabs-content > div").removeClass("active"),i.addClass("active"),a.attr("checked","checked"),e.find('.sui-tabs-content div[data-tab-content="'+n+'"]').length&&e.find('.sui-tabs-content div[data-tab-content="'+n+'"]').addClass("active"))},sidenav:function(a){var i=t(a.target).data("nav");i&&this.sidenav_go_to(i,!0),a.preventDefault()},sidenav_select:function(a){var i=t(a.target).val();i&&this.sidenav_go_to(i,!0),a.preventDefault()},sidenav_go_to:function(t,a){var i=this.$el.find('a[data-nav="'+t+'"]'),n=i.closest(".sui-vertical-tabs"),e=n.find(".sui-vertical-tab"),o=this.$el.find(".sui-box[data-nav]"),r=this.$el.find('.sui-box[data-nav="'+t+'"]');a&&history.pushState({selected_tab:t},"Global Settings","admin.php?page=forminator-settings&section="+t),e.removeClass("current"),o.hide(),i.parent().addClass("current"),r.show()},open_stripe_connect_modal:function(a){a.preventDefault();var i=this,n=t(a.target),e=n.data("modalImage"),o=n.data("modalImageX2"),r=n.data("modalTitle"),s=n.data("modalNonce");return Forminator.Stripe_Popup.open(function(){var a=t(this);i.render_stripe_connect_modal_content(a,"small",s,{})},{title:r,image:e,image_x2:o}),!1},render_stripe_connect_modal_content:function(a,i,n,e){var o=this;e.action="forminator_stripe_settings_modal",e._ajax_nonce=n,t.post({url:Forminator.Data.ajaxUrl,type:"post",data:e}).done(function(e){if(e&&e.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(e.data.html);var r=e.data.buttons;if(a.find(".sui-box-footer").html(""),_.each(r,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),!_.isUndefined(i)){var s=t("#forminator-stripe-popup");"normal"===i&&s.removeClass("sui-dialog-sm sui-dialog-lg"),"small"===i&&(s.addClass("sui-dialog-sm"),s.removeClass("sui-dialog-lg")),"large"===i&&(s.addClass("sui-dialog-lg"),s.removeClass("sui-dialog-sm"))}_.isUndefined(e.data.notification)||_.isUndefined(e.data.notification.type)||_.isUndefined(e.data.notification.text)||_.isUndefined(e.data.notification.duration)||(Forminator.Notification.open(e.data.notification.type,e.data.notification.text,e.data.notification.duration).done(function(){}),o.update_stripe_page(n))}})},update_stripe_page:function(a){var i={action:"forminator_stripe_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-stripe").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},connect_stripe:function(a){a.preventDefault();var i=t(a.target);i.addClass("sui-button-onload");var n=i.data("nonce"),e=this.$el.find("#forminator-stripe-popup"),o=e.find("form"),r=o.serializeArray(),s={};return t.map(r,function(t,a){s[t.name]=t.value}),s.connect=!0,this.render_stripe_connect_modal_content(e,"small",n,s),!1},buttonTabs:function(t){var a=this.$(t.target),i=a.closest(".sui-tabs"),n=i.find(".sui-tabs-menu .sui-tab-item"),e=i.find(".sui-tabs-content .sui-tab-content");a.is("button")&&(n.removeClass("active"),n.attr("tabindex","-1"),e.attr("hidden",!0),e.removeClass("active"),a.removeAttr("tabindex"),a.addClass("active"),i.find("#"+a.attr("aria-controls")).addClass("active"),i.find("#"+a.attr("aria-controls")).attr("hidden",!1),i.find("#"+a.attr("aria-controls")).removeAttr("hidden")),t.preventDefault()},open_paypal_connect_modal:function(a){a.preventDefault();var i=this,n=t(a.target),e=n.data("modalImage"),o=n.data("modalImageX2"),r=n.data("modalTitle"),s=n.data("modalNonce");return Forminator.Stripe_Popup.open(function(){var a=t(this);i.render_paypal_connect_modal_content(a,"small",s,{})},{title:r,image:e,image_x2:o}),!1},render_paypal_connect_modal_content:function(a,i,n,e){var o=this;e.action="forminator_paypal_settings_modal",e._ajax_nonce=n,t.post({url:Forminator.Data.ajaxUrl,type:"post",data:e}).done(function(e){if(e&&e.success){a.find(".sui-box-header h3.sui-box-title").show(),a.find(".sui-box-body").html(e.data.html);var r=e.data.buttons;if(a.find(".sui-box-footer").html(""),_.each(r,function(t){a.find(".sui-box-footer").append(t.markup)}),a.find(".sui-button").removeClass("sui-button-onload"),!_.isUndefined(i)){var s=t("#forminator-paypal-popup");"normal"===i&&s.removeClass("sui-dialog-sm sui-dialog-lg"),"small"===i&&(s.addClass("sui-dialog-sm"),s.removeClass("sui-dialog-lg")),"large"===i&&(s.addClass("sui-dialog-lg"),s.removeClass("sui-dialog-sm"))}_.isUndefined(e.data.notification)||_.isUndefined(e.data.notification.type)||_.isUndefined(e.data.notification.text)||_.isUndefined(e.data.notification.duration)||(Forminator.Notification.open(e.data.notification.type,e.data.notification.text,e.data.notification.duration).done(function(){}),o.update_paypal_page(n))}})},update_paypal_page:function(a){var i={action:"forminator_paypal_update_page",_ajax_nonce:a};t.post({url:Forminator.Data.ajaxUrl,type:"get",data:i}).done(function(t){jQuery("#sui-box-paypal").html(t.data),Forminator.Utils.sui_delegate_events(),Forminator.Stripe_Popup.close()})},connect_paypal:function(a){a.preventDefault();var i=t(a.target);i.addClass("sui-button-onload");var n=i.data("nonce"),e=this.$el.find("#forminator-stripe-popup"),o=e.find("form"),r=o.serializeArray(),s={};return t.map(r,function(t,a){s[t.name]=t.value}),s.connect=!0,this.render_paypal_connect_modal_content(e,"small",n,s),!1},disconnect_stripe:function(a){var i=t(a.target),n={action:"forminator_disconnect_stripe",_ajax_nonce:i.data("nonce")};i.addClass("sui-button-onload"),t.post({url:Forminator.Data.ajaxUrl,type:"get",data:n}).done(function(t){jQuery("#sui-box-stripe").html(t.data.html),Forminator.Utils.sui_delegate_events(),Forminator.Popup.close(),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){})})},disconnect_paypal:function(a){var i=t(a.target),n={action:"forminator_disconnect_paypal",_ajax_nonce:i.data("nonce")};i.addClass("sui-button-onload"),t.post({url:Forminator.Data.ajaxUrl,type:"get",data:n}).done(function(t){jQuery("#sui-box-paypal").html(t.data.html),Forminator.Utils.sui_delegate_events(),Forminator.Popup.close(),_.isUndefined(t.data.notification)||_.isUndefined(t.data.notification.type)||_.isUndefined(t.data.notification.text)||_.isUndefined(t.data.notification.duration)||Forminator.Notification.open(t.data.notification.type,t.data.notification.text,t.data.notification.duration).done(function(){})})}}),a=new a;return a})}(jQuery);var forminator_render_admin_captcha=function(){setTimeout(function(){var t=$(".forminator-g-recaptcha"),a=t.data("sitekey"),i=t.data("theme"),n=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:i,size:n})},100)},forminator_render_admin_captcha_v2=function(){setTimeout(function(){var t=$(".forminator-g-recaptcha-v2"),a=t.data("sitekey"),i=t.data("theme"),n=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:i,size:n})},100)},forminator_render_admin_captcha_v2_invisible=function(){setTimeout(function(){var t=$(".forminator-g-recaptcha-v2-invisible"),a=t.data("sitekey"),i=t.data("theme"),n=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:i,size:n,badge:"inline"})},100)},forminator_render_admin_captcha_v3=function(){setTimeout(function(){var t=$(".forminator-g-recaptcha-v3"),a=t.data("sitekey"),i=t.data("theme"),n=t.data("size");window.grecaptcha.render(t[0],{sitekey:a,theme:i,size:n,badge:"inline"})},100)};