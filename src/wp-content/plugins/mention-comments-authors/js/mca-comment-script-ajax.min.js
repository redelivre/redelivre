function mcaAjaxChange(){jQuery(document).ready(function(a){function e(b,c){var e=a(d).find("span").text("@"+c.val).end().find("small").text("("+(c.meta||c.val)+")").end();b.append(e)}if($comment=a(mcaCommentTextarea),$comment.length>0){var b=new Array,c=a(".mca-author");c.each(function(){b.push({val:a(this).attr("data-name"),meta:a(this).attr("data-realname")})}),sort_and_unique(b);var d="<div><span />&nbsp;<small /></div>";$comment.sew({values:b,elementFactory:e}),a(".mca-button").on("click",function(){a(".mca-fired").removeClass("mca-fired"),a(".mca-prevent-elem").removeClass("mca-prevent-elem"),a(".mca-comment-text-wrapper").removeClass("mca-comment-text-wrapper");var b=a(this).attr("data-target"),c=a(".mca-author"),d=null,e=!1;a(this).parents(".mca-author").addClass("mca-fired"),c.each(function(f){return a(this).hasClass("mca-fired")&&(e=!0),e&&d||f==c.length-1?(d.addClass("mca-prevent-elem").parent().addClass("mca-comment-text-wrapper"),a("body,html").animate({scrollTop:d.offset().top-200},200),!1):(a(this).attr("data-name")==b&&(d=a(this)),void 0)})})}})}function sort_and_unique(a){function b(a,b){return a.val<b.val?-1:a.val==b.val?0:1}a.sort(b);for(var c=1;c<a.length;c++)a[c].val===a[c-1].val&&a.splice(c--,1);return a}mcaAjaxChange();