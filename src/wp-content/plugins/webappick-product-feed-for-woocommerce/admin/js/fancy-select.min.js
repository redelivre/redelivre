/**!
 * WooFeed Fancy Select
 * @version 1.0.0
 * @copyright 2020 WebAppick
 * @author Kudratullah <mhamudul.hk@gmail.com>
 */
!function(v,f,m){"use strict";function $(e,t){var r=this,l=v.extend(!0,{},{options:[],optgroups:[],items:[],placeholder:"",delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,maxItemShow:3,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t),i=e[0];(i.fancySelect=r).order=0;var s=f.getComputedStyle&&f.getComputedStyle(i,null),n=s?s.getPropertyValue("direction"):input.currentStyle&&input.currentStyle.direction;n=n||e.parents("[dir]:first").attr("dir")||"",r.computedStyle=s,/android/i.test(f.navigator.userAgent)||m.createElement("input").validity;var a,o,d,p={},c={readData:function(e){var t=r.dataAttr&&e.attr(r.dataAttr);return"string"==typeof t&&t.length?JSON.parse(t):null},addOption:function(e,t){e=v(e);var i=e.val()+"";if(i||l.allowEmptyOption)if(p.hasOwnProperty(i)){if(t){var s=p[i][field_optgroup];s?v.isArray(s)?s.push(t):p[i][field_optgroup]=[s,t]:p[i][field_optgroup]=t}}else{var n=c.readData(e)||{};n[r.settings.labelField]=n[r.settings.labelField]||e.text(),n[r.settings.valueField]=n[r.settings.valueField]||i,n[r.settings.disabledField]=n[r.settings.disabledField]||e.prop("disabled"),n[r.settings.optgroupField]=n[r.settings.optgroupField]||t,n.$order=++r.order,p[i]=n,r.settings.options.push(n),e.is(":selected")&&r.settings.items.push(i)}},addGroup:function(e){var t,i,s,n,l;for((s=(e=v(e)).attr("label"))&&((n=c.readData(e)||{})[r.settings.optgroupLabelField]=s,n[r.settings.optgroupValueField]=s,n[r.settings.disabledField]=e.prop("disabled"),n.$order=++r.order,r.settings.optgroups.push(n)),t=0,i=(l=v("option",e)).length;t<i;t++)c.addOption(l[t],s)}};v.extend(r,{settings:l,$select:e,tabIndex:e.attr("tabindex")||"",tagType:1,rtl:/rtl/i.test(n),multiple:e.attr("multiple"),eventNS:".FancySelect"+ ++$.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isRendered:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:{},renderCache:{},onSearchChange:null===l.loadThrottle?r.onSearchChange:(a=r.onSearchChange,o=l.loadThrottle,function(){var e=this,t=arguments;f.clearTimeout(d),d=f.setTimeout(function(){a.apply(e,t)},o)})}),""===r.settings.placeholder&&(r.settings.placeholder=e.attr("placeholder")||e.attr("data-placeholder"),r.settings.placeholder||r.settings.allowEmptyOption||(r.settings.placeholder=e.children('option[value=""]').text())),r.settings.maxItems=r.multiple?null:1;for(var u=0,g=r.$select.children().length;u<g;u++){var h=r.$select.children()[u].tagName.toLowerCase();"optgroup"===h?c.addGroup(r.$select.children()[u]):"option"===h&&c.addOption(r.$select.children()[u])}r.$wrapper=v('<div class="fancy-picker">').addClass(e.attr("class")),r.computedStyle.hasOwnProperty("width")&&r.$wrapper.css({width:r.computedStyle.width}),r.$outputWrapper=v('<div class="fancy-picker-picked">').appendTo(r.$wrapper),r.originalPlaceholder=v('<span class="fancy-picker-placeholder">').appendTo(r.$outputWrapper),r.dataPlaceholder=v('<span class="fancy-picker-data">').appendTo(r.$outputWrapper),r.dataCountPlaceholder=v('<span class="fancy-picker-count">').appendTo(r.$outputWrapper),r.$dropdown=v('<div class="fancy-picker-ui">').appendTo(r.$wrapper),r.$dropdownContent=v('<div class="fancy-picker-content">').appendTo(r.$dropdown),r.setup()}$.count=0,v.extend($.prototype,{setup:function(){var n=this;n.revertSettings={$children:n.$select.children().detach(),tabindex:n.$select.attr("tabindex")},n.$select.attr("tabindex",-1).hide().after(n.$wrapper),n.$select.data("FancySelect",n),n.$select.addClass("FancySelectInit"),n.settings.items.sort(),n.preload&&n.render(),n.updatePlaceholder(),n.updateOriginalInput(),n.$wrapper.on("click"+n.eventNS,".fancy-picker-picked",function(e){n.$select.trigger("show"),n.isRendered||n.render(),n.$wrapper.toggleClass("active"),n.$select.trigger("shown")}),v(m).on("click"+n.eventNS,function(e){v(e.target).closest(n.$wrapper).length||(n.$select.trigger("hide"),n.$wrapper.removeClass("active"),n.$select.trigger("hidden"))}),n.$wrapper.on("click"+n.eventNS,".fancy-picker-option:not(.disabled)",function(e){e.preventDefault();var t=v(this),i=!1,s=t.data("value");n.multiple?(t.hasClass("selected")?t.removeClass("selected"):(i=!0,t.addClass("selected")),i?n.settings.items.push(s):n.settings.items=n.settings.items.filter(function(e){return e!=s}),n.settings.items.sort()):(n.$dropdownContent.find(".fancy-picker-option").not(t).removeClass("selected"),t.addClass("selected"),i=!0,n.settings.items=[s],n.$wrapper.removeClass("active")),n.updatePlaceholder(),n.updateOriginalInput()}),n.$select.trigger("initialize")},updateOriginalInput:function(e){var t=this,i=[],s=!1;e=!0===e;for(var n=0,l=t.settings.items.length;n<l;n++){var r=t.getSelectedOptionData(t.settings.items[n]);r&&(i.push('<option value="'+t.settings.items[n]+'" selected="selected">'+r[t.settings.labelField]||"</option>"),s=!0)}t.$select.html(i.join("")),!e&&s&&t.$select.trigger("change")},render:function(){for(var e=this,t=[],i=0,s=e.settings.options.length;i<s;i++){var n=e.settings.options[i],l=e.isSelected(n[e.settings.valueField])?"fancy-picker-option selected":"fancy-picker-option";t.push('<div class="'+l+'" data-value="'+n[e.settings.valueField]+'">'+n[e.settings.labelField]+"</div>")}e.$dropdownContent.html(t.join("")),e.$select.trigger("rendered"),e.isRendered=!0},updatePlaceholder:function(){var i=this;i.originalPlaceholder.text(i.settings.placeholder),i.settings.items.length?i.originalPlaceholder.hide():i.originalPlaceholder.show();var s=[],e=i.settings.items.length>i.settings.maxItemShow?i.settings.maxItemShow-1:i.settings.maxItemShow;if(i.settings.items.slice(0,e).forEach(function(e){var t=i.getSelectedOptionData(e);t&&s.push("<span>"+t[i.settings.labelField]+"</span>")}),i.dataPlaceholder.html(s.join('<span class="fancy-picker-separator">'+i.settings.delimiter+"</span> ")),i.settings.items.length>i.settings.maxItemShow){var n=[];i.settings.items.forEach(function(e){var t=i.getSelectedOptionData(e);t&&n.push(t[i.settings.labelField])}),i.dataCountPlaceholder.attr("title",n.join(i.settings.delimiter.trim()+" ")),i.dataCountPlaceholder.html("+"+(i.settings.items.length-e)+" More &hellip;")}else i.dataCountPlaceholder.removeAttr("title"),i.dataCountPlaceholder.html("");i.$select.trigger("placeholderChanged")},getSelectedOptionData:function(t){var i=this,e=i.settings.options.filter(function(e){return e[i.settings.valueField]==t});return!!e.length&&e[0]},isSelected:function(t){return 0<this.settings.items.filter(function(e){return e==t}).length},destroy:function(){var e=this;e.$select.trigger("destroy"),e.trigger("destroy"),e.off(),e.$select.html("").append(e.revertSettings.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:e.revertSettings.tabindex}).show(),e.$control_input.removeData("grow"),e.$select.removeData("selectize"),0==--$.count&&$.$testInput&&($.$testInput.remove(),$.$testInput=void 0),v(f).off(e.eventNS),v(m).off(e.eventNS),v(m.body).off(e.eventNS),delete e.$select[0].fancySelect},on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}}),v.fn.fancySelect=function(e){return this.each(function(){this.fancySelect||"select"===this.tagName.toLowerCase()&&new $(v(this),e)})}}(jQuery,window,document);