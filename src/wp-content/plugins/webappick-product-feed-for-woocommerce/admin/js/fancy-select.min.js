"use strict";!function(v,f,m){function y(e,t){var r=this,l=v.extend(!0,{},{options:[],optgroups:[],items:[],placeholder:"",delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,maxItemShow:3,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},t),n=e[0];(n.fancySelect=r).order=0;var i=f.getComputedStyle&&f.getComputedStyle(n,null),s=i?i.getPropertyValue("direction"):n.currentStyle&&n.currentStyle.direction;s=s||e.parents("[dir]:first").attr("dir")||"",r.computedStyle=i,/android/i.test(f.navigator.userAgent)||m.createElement("input").validity;var a,o,d,c={},p={readData:function(e){var t=r.dataAttr&&e.attr(r.dataAttr);return"string"==typeof t&&t.length?JSON.parse(t):null},addOption:function(e,t){e=v(e);var n=r.hash_key(e.val());if(n||l.allowEmptyOption)if(c.hasOwnProperty(n)){if(t){var i=c[n][field_optgroup];i?v.isArray(i)?i.push(t):c[n][field_optgroup]=[i,t]:c[n][field_optgroup]=t}}else{var s=p.readData(e)||{};s[r.settings.labelField]=s[r.settings.labelField]||e.text(),s[r.settings.valueField]=s[r.settings.valueField]||n,s[r.settings.disabledField]=s[r.settings.disabledField]||e.prop("disabled"),s[r.settings.optgroupField]=s[r.settings.optgroupField]||t,s.$order=++r.order,c[n]=s,r.settings.options.push(s),e.is(":selected")&&r.settings.items.push(s)}},addGroup:function(e){var t,n,i,s,l;for((i=(e=v(e)).attr("label"))&&((s=p.readData(e)||{})[r.settings.optgroupLabelField]=i,s[r.settings.optgroupValueField]=i,s[r.settings.disabledField]=e.prop("disabled"),s.$order=++r.order,r.settings.optgroups.push(s)),t=0,n=(l=v("option",e)).length;t<n;t++)p.addOption(l[t],i)}};v.extend(r,{settings:l,$select:e,tabIndex:e.attr("tabindex")||"",tagType:1,rtl:/rtl/i.test(s),multiple:e.attr("multiple"),eventNS:".FancySelect"+ ++y.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:e.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isRendered:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:{},renderCache:{},onSearchChange:null===l.loadThrottle?r.onSearchChange:(a=r.onSearchChange,o=l.loadThrottle,function(){var e=this,t=arguments;f.clearTimeout(d),d=f.setTimeout(function(){a.apply(e,t)},o)})}),""===r.settings.placeholder&&(r.settings.placeholder=e.attr("placeholder")||e.attr("data-placeholder"),r.settings.placeholder||r.settings.allowEmptyOption||(r.settings.placeholder=e.children('option[value=""]').text())),r.settings.maxItems=r.multiple?null:1;for(var u=0,g=r.$select.children().length;u<g;u++){var h=r.$select.children()[u].tagName.toLowerCase();"optgroup"===h?p.addGroup(r.$select.children()[u]):"option"===h&&p.addOption(r.$select.children()[u])}r.$wrapper=v('<div class="fancy-picker">').addClass(e.attr("class")),r.computedStyle.hasOwnProperty("width")&&r.$wrapper.css({width:r.computedStyle.width}),r.$outputWrapper=v('<div class="fancy-picker-picked">').appendTo(r.$wrapper),r.originalPlaceholder=v('<span class="fancy-picker-placeholder">').appendTo(r.$outputWrapper),r.dataPlaceholder=v('<span class="fancy-picker-data">').appendTo(r.$outputWrapper),r.dataCountPlaceholder=v('<span class="fancy-picker-count">').appendTo(r.$outputWrapper),r.$dropdown=v('<div class="fancy-picker-ui">').appendTo(r.$wrapper),r.$dropdownContent=v('<div class="fancy-picker-content">').appendTo(r.$dropdown),r.setup()}y.count=0,v.extend(y.prototype,{setup:function(){var s=this;s.revertSettings={$children:s.$select.children().detach(),tabindex:s.$select.attr("tabindex")},s.$select.attr("tabindex",-1).hide().after(s.$wrapper),s.$select.data("FancySelect",s),s.$select.addClass("FancySelectInit"),s.settings.items.sort(function(e,t){return e[s.settings.sortField]-t[s.settings.sortField]}),s.preload&&s.render(),s.updatePlaceholder(),s.updateOriginalInput(),s.$wrapper.on("click"+s.eventNS,".fancy-picker-picked",function(e){s.$select.trigger("show"),s.isRendered||s.render(),s.$wrapper.toggleClass("active"),s.$select.trigger("shown")}),v(m).on("click"+s.eventNS,function(e){v(e.target).closest(s.$wrapper).length||(s.$select.trigger("hide"),s.$wrapper.removeClass("active"),s.$select.trigger("hidden"))}),s.$wrapper.on("click"+s.eventNS,".fancy-picker-option:not(.disabled)",function(e){e.preventDefault();var t=v(this),n=!1,i=s.hash_key(t.data("value"));s.multiple?(t.hasClass("selected")?t.removeClass("selected"):(n=!0,t.addClass("selected")),n?s.settings.items.push(s.getSelectedOptionData(i)):s.settings.items=s.settings.items.filter(function(e){return e[s.settings.valueField]!==i}),s.settings.items.sort(function(e,t){return e[s.settings.sortField]-t[s.settings.sortField]})):(s.$dropdownContent.find(".fancy-picker-option").not(t).removeClass("selected"),t.addClass("selected"),n=!0,s.settings.items=[s.getSelectedOptionData(i)],s.$wrapper.removeClass("active")),s.updatePlaceholder(),s.updateOriginalInput()}),v(f).on("resize"+s.eventNS,function(){var e=f.getComputedStyle&&f.getComputedStyle(s.$select[0],null);e.hasOwnProperty("width")&&s.$wrapper.css({width:e.width})}),s.$select.trigger("initialize")},render:function(){function s(e){return l.isSelected(e)?"fancy-picker-option selected":"fancy-picker-option"}var l=this,r=[],a=l.settings.optgroups,o=l.settings.options;if(a.length)for(var e=function(t){r.push('<div class="fancy-picker-option-group">'),r.push('<div class="fancy-picker-option-group-label">'.concat(a[t][l.settings.labelField],"</div>"));for(var e=o.filter(function(e){return e[l.settings.optgroupField]===a[t][l.settings.valueField]}),n=0;n<e.length;n++){var i=e[t];r.push('<div class="'.concat(s(i[l.settings.valueField]),'" data-value="').concat(i[l.settings.valueField],'">').concat(i[l.settings.labelField],"</div>"))}r.push("</div>")},t=0;t<a.length;t++)e(t);else for(var n=0;n<o.length;n++){var i=o[n];r.push('<div class="'.concat(s(i[l.settings.valueField]),'" data-value="').concat(i[l.settings.valueField],'">').concat(i[l.settings.labelField],"</div>"))}l.$dropdownContent.html(r.join("")),l.$select.trigger("rendered"),l.isRendered=!0},updatePlaceholder:function(){var t=this,n=[],e=t.settings.items,i=e.length>t.settings.maxItemShow?t.settings.maxItemShow-1:t.settings.maxItemShow;if(t.originalPlaceholder.text(t.settings.placeholder),e.length?t.originalPlaceholder.hide():t.originalPlaceholder.show(),e.slice(0,i).forEach(function(e){n.push("<span>".concat(e[t.settings.labelField],"</span>"))}),t.dataPlaceholder.html(n.join('<span class="fancy-picker-separator">'.concat(t.settings.delimiter,"</span>"))),e.length>t.settings.maxItemShow){var s=[];e.forEach(function(e){s.push(e[t.settings.labelField])}),t.dataCountPlaceholder.attr("title",s.join(t.settings.delimiter.trim()+" ")),t.dataCountPlaceholder.html("+"+(e.length-i)+" More &hellip;")}else t.dataCountPlaceholder.removeAttr("title"),t.dataCountPlaceholder.html("");return t.$select.trigger("placeholderChanged"),t},updateOriginalInput:function(e){var t=this,n=[],i=!1;e=!0===e;for(var s=t.settings.items,l=0;l<s.length;l++)n.push('<option value="'+s[l][t.settings.valueField]+'" selected="selected">'+s[l][t.settings.labelField]||"</option>"),i=!0;return t.$select.html(n.join("")),!e&&i&&t.$select.trigger("change"),t},getSelectedOptionData:function(t){var n=this,e=n.settings.options.filter(function(e){return e[n.settings.valueField]===t});return!!e.length&&e[0]},isSelected:function(t){var n=this;return 0<n.settings.items.filter(function(e){return e[n.settings.valueField]===t}).length},hash_key:function(e){return e+""},destroy:function(){var e=this;e.$select.trigger("destroy"),e.trigger("destroy"),e.off(),e.$select.html("").append(e.revertSettings.$children).removeAttr("tabindex").removeClass("FancySelectInit").attr({tabindex:e.revertSettings.tabindex}).show(),e.$select.removeData("FancySelect"),e.$wrapper.remove(),0==--y.count&&y.$testInput&&(y.$testInput.remove(),y.$testInput=void 0),v(f).off(e.eventNS),v(m).off(e.eventNS),v(m.body).off(e.eventNS),delete e.$select[0].fancySelect}}),v.extend(y.prototype,{bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}}),v.fn.fancySelect=function(e){return this.each(function(){this.fancySelect||"select"===this.tagName.toLowerCase()&&new y(v(this),e)})}}(jQuery,window,document);
//# sourceMappingURL=fancy-select.min.js.map
